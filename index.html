<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Cobblemon Mastery Guide</title>

  <!-- SEO — meta tagi -->
  <meta name="description" content="Najlepsza polska baza buildów competitive Cobblemon. Poradnik IV, EV, Nature, Moveset dla wszystkich Pokémonów w Minecraft." />
  <meta name="keywords" content="Cobblemon, Pokemon, Minecraft, buildy, poradnik, competitive, IV, EV, Nature, moveset, Pokémon" />
  <meta property="og:title" content="Cobblemon Mastery Guide" />
  <meta property="og:description" content="Najlepsza polska baza buildów competitive Cobblemon." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://cobblemon-mastery.vercel.app/" />
  <meta property="og:image" content="https://cobblemon-mastery.vercel.app/favicon.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Cobblemon Mastery Guide" />
  <meta name="twitter:description" content="Najlepsza polska baza buildów competitive Cobblemon." />
  <meta name="twitter:image" content="https://cobblemon-mastery.vercel.app/favicon.png" />
  <meta name="robots" content="index, follow" />

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/favicon.png" />

  <!-- Czcionki Google (asynchroniczne ładowanie) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=VT323&family=Press+Start+2P&display=swap" rel="stylesheet" media="print" onload="this.media='all'" />
  <noscript><link href="https://fonts.googleapis.com/css2?family=VT323&family=Press+Start+2P&display=swap" rel="stylesheet" /></noscript>

  <!-- Preconnect do PokeAPI -->
  <link rel="preconnect" href="https://pokeapi.co" />
  <link rel="preconnect" href="https://raw.githubusercontent.com" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />

  <!-- AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9885277201663964"
     crossorigin="anonymous"></script>

  <!-- Timeout fallback — wyświetla komunikat gdy strona ładuje się zbyt długo -->
  <script>
  (function(){
    var COB_LOAD_TIMER = setTimeout(function(){
      var m = document.getElementById('main-area');
      if(!m || !m.innerHTML.trim() || m.innerHTML.indexOf('Ladowanie')>-1){
        var d = document.createElement('div');
        d.id='cob-load-fallback';
        d.style.cssText='position:fixed;top:0;left:0;right:0;bottom:0;z-index:99999;background:#1a1a1a;display:flex;flex-direction:column;align-items:center;justify-content:center;font-family:monospace;color:#f0f0f0;text-align:center;padding:24px';
        d.innerHTML='<div style="font-size:28px;margin-bottom:16px">\u23f3</div>'
          +'<div style="font-size:20px;margin-bottom:12px;color:#ffaa00">Strona \u0142aduje si\u0119 zbyt d\u0142ugo...</div>'
          +'<div style="font-size:16px;color:#aaa;margin-bottom:20px">Mo\u017cliwe przyczyny: wolne po\u0142\u0105czenie, blokowanie skrypt\u00f3w lub problem z PokeAPI.</div>'
          +'<button onclick="location.reload()" style="font-family:monospace;font-size:18px;background:#555;color:#fff;border:2px solid #888;padding:8px 24px;cursor:pointer">\ud83d\udd04 Spr\u00f3buj od\u015bwie\u017cy\u0107</button>'
          +'<div style="font-size:13px;color:#666;margin-top:16px">Je\u015bli problem si\u0119 powtarza, wyczy\u015b\u0107 dane strony (Ctrl+Shift+Del) i spr\u00f3buj ponownie.</div>';
        document.body.appendChild(d);
      }
    }, 12000);
    window._cobClearLoadTimer = function(){ clearTimeout(COB_LOAD_TIMER); var f=document.getElementById('cob-load-fallback'); if(f)f.remove(); };
  })();
  </script>

  <!-- Arkusze stylów (modularny CSS) — v13 cache-bust -->
  <link rel="stylesheet" href="css/variables.css?v=13" />
  <link rel="stylesheet" href="css/base.css?v=13" />
  <link rel="stylesheet" href="css/layout.css?v=13" />
  <link rel="stylesheet" href="css/components.css?v=13" />
  <link rel="stylesheet" href="css/pokemon.css?v=13" />
  <link rel="stylesheet" href="css/competitive.css?v=13" />
  <link rel="stylesheet" href="css/pages.css?v=13" />
  <link rel="stylesheet" href="css/evolution.css?v=13" />
  <link rel="stylesheet" href="css/glassmorphism.css?v=13" />
  <link rel="stylesheet" href="css/responsive.css?v=13" />
  <link rel="stylesheet" href="assets/styles.css?v=13" />
</head>
<body>

<header>
  <button class="hamburger-btn" onclick="toggleHamburger()" title="Menu" aria-label="Otwórz menu nawigacji">&#9776;</button>
  <div>
    <a href="index.html" onclick="showPage('welcome');return false;" class="header-title" style="text-decoration:none;color:inherit;cursor:pointer">&#9876; Cobblemon Mastery Guide</a>
    <div class="header-subtitle">Serwerowa Baza Cobblemon &middot; Minecraft Mod</div>
  </div>
  <div class="lang-toggle" id="lang-toggle">
    <button class="lang-btn active" data-lang="pl" onclick="setLang('pl')">PL</button>
    <button class="lang-btn" data-lang="en" onclick="setLang('en')">EN</button>
  </div>
  <div class="header-right" id="header-right">
    <span class="mc-badge" id="badge-gen">&#127807; Generacje 1&ndash;9</span>
    <span class="mc-badge">&#9874; PokeAPI</span>
    <a href="arena.html" class="mc-btn" id="btn-battle">&#9876; Arena Walki</a>
    <button class="mc-btn" onclick="showPage('team-analyzer')" id="btn-team">&#9876; Zespół PvP</button>
    <button class="mc-btn" onclick="showPage('ranking')" id="btn-ranking">&#127942; Ranking Typów</button>
    <button class="mc-btn" onclick="showPage('type-chart')" id="btn-typechart">&#9878; Tabela Typów</button>
    <button class="mc-btn" onclick="showPage('items')" id="btn-items">&#128230; Przedmioty</button>
    <button class="mc-btn" onclick="showPage('apricorns')" id="btn-apricorns">&#127822; Apricorny</button>
    <button class="mc-btn" onclick="showPage('welcome')" id="btn-start">&#127968; Start</button>
  </div>
</header>

<!-- Baner wsparcia -->
<div id="ad-top" class="donate-section">
  <h2>💚 <span id="donate-title">Wesprzyj rozwój projektu</span></h2>
  <p id="donate-desc">Cobblemon Mastery Guide to darmowy projekt. Jeśli pomaga Ci w grze, rozważ wsparcie!</p>
  <button class="donate-btn" id="donate-btn" onclick="window.open('https://buycoffee.to/cobblemonmg','_blank')">☕ <span id="donate-btn-text">Postaw kawkę</span></button>
</div>

<!-- Overlay sidebara (mobile) -->
<div class="sidebar-overlay" id="sidebar-overlay" onclick="toggleHamburger()"></div>

<div class="app-layout">
  <!-- Sidebar z listą Pokémonów -->
  <aside id="sidebar">
    <div class="sidebar-search">
      <button class="sidebar-close" onclick="toggleHamburger()" title="Zamknij" aria-label="Zamknij menu boczne">&times;</button>
      <label for="search-input">&#128269; SZUKAJ POK&Eacute;MONA</label>
      <input class="mc-input" id="search-input" type="text" placeholder="np. Pikachu..." autocomplete="off" />
    </div>
    <div class="gen-filters" id="gen-filters">
      <button class="gen-filter-btn active" data-gen="0">Wszystkie</button>
      <button class="gen-filter-btn" data-gen="1">Gen I</button>
      <button class="gen-filter-btn" data-gen="2">Gen II</button>
      <button class="gen-filter-btn" data-gen="3">Gen III</button>
      <button class="gen-filter-btn" data-gen="4">Gen IV</button>
      <button class="gen-filter-btn" data-gen="5">Gen V</button>
      <button class="gen-filter-btn" data-gen="6">Gen VI</button>
      <button class="gen-filter-btn" data-gen="7">Gen VII</button>
      <button class="gen-filter-btn" data-gen="8">Gen VIII</button>
      <button class="gen-filter-btn" data-gen="9">Gen IX</button>
    </div>
    <div id="pokemon-count">Ladowanie...</div>
    <div class="pokemon-list" id="pokemon-list"></div>
  </aside>

  <!-- Główny obszar treści -->
  <main class="main-area" id="main-area"></main>
</div>

<!-- Pasek statusu -->
<div id="status-bar">
  <div class="spinner" id="spinner"></div>
  <span id="status-text">Ladowanie listy Pok&eacute;mon&oacute;w...</span>
</div>

<!-- Skrypty JS (modularny, defer) — v13 cache-bust -->
<script defer src="js/config.js?v=13"></script>
<script defer src="js/i18n.js?v=13"></script>
<script defer src="js/types.js?v=13"></script>
<script defer src="js/utils.js?v=13"></script>
<script defer src="js/data.js?v=13"></script>
<script defer src="js/state.js?v=13"></script>
<script defer src="js/favorites.js?v=13"></script>
<script defer src="js/team.js?v=13"></script>
<script defer src="js/evolution.js?v=13"></script>
<script defer src="js/weakness.js?v=13"></script>
<script defer src="js/battle.js?v=13"></script>
<script defer src="js/detail.js?v=13"></script>
<script defer src="js/calculator.js?v=13"></script>
<script defer src="js/pages.js?v=13"></script>
<script defer src="js/app.js?v=13"></script>

<!-- Service Worker -->
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/service-worker.js')
      .then(function(reg) { console.log('SW registered, scope:', reg.scope); })
      .catch(function(err) { console.warn('SW registration failed:', err); });
  });
}
</script>

<noscript>
  <div style="padding:2em;text-align:center;font-family:monospace;color:#f0f0f0;background:#1a1a1a;min-height:100vh;display:flex;align-items:center;justify-content:center">
    <p>Ta strona wymaga JavaScript do prawidłowego działania. Włącz JavaScript w ustawieniach przeglądarki i odśwież stronę.</p>
  </div>
</noscript>

</body>
</html>
